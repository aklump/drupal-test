<!DOCTYPE html>

<html>
<head>
  <title>Client Tests</title>
  <link href="search/tipuesearch.css" rel="stylesheet">
  <link href="style.css" rel="stylesheet">
</head>

<body class="page--client">
<header>
  <div class="pager">
  <a href="unit.html" class="prev unit">&laquo;Unit Tests        </a>
  <a href="index.html" class="index">Index</a>
  <a href="kernel.html" class="next kernel">Kernel Tests&raquo;</a>
</div>
</header>

  <div class="search__wrapper">
  <form action="search--results.html">
    <input type="text" class="search-input" name="q" id="tipue_search_input" autocomplete="off" required>
  </form>
</div>

  <h1>Client Tests</h1>
  <div class="breadcrumb"><a href="index.html">Index</a></div>

<section>

<p>This is a type of tests where you will be testing endpoints of an API or URLs.  Use this to check for URL statuses and headers for example.  This has the same scope as unit tests, which means you can access class constants, but no Drupal bootstrap.  Tests act as a API consumer or client of the website.  There are custom assert methods on this class to help with such testing.</p>

<pre><code>/**
 * Assert confirmation page is forbidden.
 */
public function testConfirmationPageIsForbidden() {
  $this-&gt;assertLocalUrlStatus(403, implode('/', [
    'node',
    EarthriseService::NID_FORM,
    'done',
  ]));
}
</code></pre>

<h2>Configuration</h2>

<p>The base URL must be set in an environment variable in order for client tests to work, e.g.,</p>

<pre><code>$ cd tests/phpunit
$ export CLIENT_TEST_BASE_URL=http://develop.globalonenessproject.loft; phpunit -c phpunit.xml --testsuite Client
</code></pre>

<h2>JSON Schema</h2>

<p>The client tests provide the means of validation using JSON Schema.  You indicate where your schema files are located in <em>phpunit.xml</em> using the custom key <code>jsonschema</code>, e.g.,</p>

<pre><code>&lt;phpunit&gt;
    &lt;jsonschema&gt;
        &lt;directory&gt;../web/sites/all/modules/custom/my_module/tests/schema&lt;/directory&gt;
    &lt;/jsonschema&gt;
&lt;/phpunit&gt;
</code></pre>
</section>

<div class="search__results">
  <div id="tipue_search_content"></div>
</div>

<footer>
  <div class="pager">
  <a href="unit.html" class="prev unit">&laquo;Unit Tests        </a>
  <a href="index.html" class="index">Index</a>
  <a href="kernel.html" class="next kernel">Kernel Tests&raquo;</a>
</div>
  
  <div id="footer-legaleeze">
    <p class="legaleeze center">Version: 0.1.2 &bull; Last Updated: Mon, 19 Nov 2018 08:57:58 -0800</p>
  </div>
</footer>

<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.4/jquery.min.js"></script>
  <script src="search/tipuesearch_content.js"></script>
  <script src="search/tipuesearch_set.js"></script>
  <script src="search/tipuesearch.min.js"></script>
  <script>
    $(document).ready(function () {
      $('#tipue_search_input').tipuesearch();
    });
  </script>
<script src="js/core.js"></script>
</body>
</html>

