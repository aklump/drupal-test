<!DOCTYPE html>

<html>
<head>
  <title>Unit Tests        </title>
  <link href="search/tipuesearch.css" rel="stylesheet">
  <link href="style.css" rel="stylesheet">
</head>

<body class="page--unit">
<header>
  <div class="pager">
  <a href="modules.html" class="prev modules">&laquo;Module and Theme Testing</a>
  <a href="index.html" class="index">Index</a>
  <a href="client.html" class="next client">Client Tests&raquo;</a>
</div>
</header>

  <div class="search__wrapper">
  <form action="search--results.html">
    <input type="text" class="search-input" name="q" id="tipue_search_input" autocomplete="off" required>
  </form>
</div>

  <h1>Unit Tests        </h1>
  <div class="breadcrumb"><a href="index.html">Index</a></div>

<section>

<ul>
<li>Test classnames should follow: <em>&#42;UnitTest</em></li>
<li><p>Unit tests do not have access to the Drupal bootstrap; these are very fast.  You should try to write unit tests whenever possible.  Only move to Kernel tests if unit tests are not appropriate.</p></li>
<li><p>If a unit test requires a file that is not normally autoloaded, it should be added to the <code>autoload-dev</code> section of the module's composer file.</p></li>
</ul>

<h2>A Note About Test Suite Order in XML</h2>

<p><strong>You will probably not need to modify <em>phpunit.xml</em>. But if you do...</strong></p>

<p>Be very careful when modifying <em>phpunit.xml</em>, that you do not list even a single kernel test before any unit tests.  When any kernel test is run, Drupal will be bootstrapped which "pollutes" the global namespace with stuff that could bleed into your unit tests, giving them out-of-scope and misleading functions, classes, constants, etc.  In effect they could be acting like kernel tests, if you're not careful.</p>

<p>Notice how the unit tests come before the kernel tests in the code below; client tests must also precede the Kernerl tests.</p>

<pre><code>&lt;testsuites&gt;
    &lt;testsuite name="Unit"&gt;
        &lt;directory&gt;../../web/sites/all/modules/custom/*/tests/src/Unit&lt;/directory&gt;
    &lt;/testsuite&gt;
    &lt;testsuite name="Client"&gt;
        &lt;directory&gt;../../web/sites/all/modules/custom/*/tests/src/Client&lt;/directory&gt;
    &lt;/testsuite&gt;
    &lt;testsuite name="Kernel"&gt;
        &lt;directory&gt;../../web/sites/all/modules/custom/*/tests/src/Kernel&lt;/directory&gt;
    &lt;/testsuite&gt;
&lt;/testsuites&gt;
</code></pre>

<p>To be sure, run the entire unit test suite standalone on occassion, e.g.,</p>

<pre><code>phpunit . --testsuite Unit
</code></pre>

<h2>Troubleshooting</h2>

<h3>Fatal error: Class ... not found ...</h3>

<ul>
<li>Try running <code>composer update --lock</code> from <em>tests</em> (the test runner directory).</li>
</ul>
</section>

<div class="search__results">
  <div id="tipue_search_content"></div>
</div>

<footer>
  <div class="pager">
  <a href="modules.html" class="prev modules">&laquo;Module and Theme Testing</a>
  <a href="index.html" class="index">Index</a>
  <a href="client.html" class="next client">Client Tests&raquo;</a>
</div>
  
  <div id="footer-legaleeze">
    <p class="legaleeze center">Version: 0.1.2 &bull; Last Updated: Mon, 19 Nov 2018 12:44:48 -0800</p>
  </div>
</footer>

<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.4/jquery.min.js"></script>
  <script src="search/tipuesearch_content.js"></script>
  <script src="search/tipuesearch_set.js"></script>
  <script src="search/tipuesearch.min.js"></script>
  <script>
    $(document).ready(function () {
      $('#tipue_search_input').tipuesearch();
    });
  </script>
<script src="js/core.js"></script>
</body>
</html>

